{% extends "base.html" %}

{% block title %}Tweet Analysis | Agentic AI{% endblock %}

{% block content %}
<div class="analysis-container">
  <h1 class="page-title">Tweet Analysis Summary ğŸ§ </h1>

  {% if tweet %}
  <div class="tweet-card">
    <div class="tweet-header">
      <img
        src="{{ tweet['profile_image_url'] }}"
        alt="Profile Picture"
        class="profile-pic"
      />
      <div>
        <h2 class="tweet-name">{{ tweet['name'] }}</h2>
        <p class="tweet-username">@{{ tweet['username'] }}</p>
      </div>
    </div>

    <p class="tweet-text">{{ tweet['text'] }}</p>

    {% if tweet.media is defined %}
    <div class="tweet-media">
      {% for media in tweet['media'] %}
      {% if media.type == 'photo' %}
      <img src="{{ media.url }}" alt="Tweet image" class="tweet-img" />
      {% elif media.type == 'video' %}
      <video controls class="tweet-video">
        <source src="{{ media.url }}" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      {% endif %}
      {% endfor %}
    </div>
    {% endif %}

    <div class="tweet-stats">
      <span>â¤ï¸ {{ tweet['likes'] }} Likes</span>
      <span>ğŸ” {{ tweet['retweets'] }} Retweets</span>
      <span>ğŸ’¬ {{ tweet['replies'] }} Replies</span>
    </div>
  </div>
  {% else %}
  <p class="error-message">
    âŒ Could not find the tweet or an error occurred.<br />
    Please check the URL and try again.
  </p>
  {% endif %}

  {% if verdict %}
  <div class="verdict-card">
    <h2>ğŸ§© Verdict Summary</h2>
    <p><strong>Final Verdict:</strong> {{ verdict.final_verdict }}</p>
    <p><strong>Score:</strong> {{ verdict.overall_score }}</p>
    <p><strong>Explanation:</strong> {{ verdict.reason }}</p>
  </div>
  {% endif %}

  <a href="{{ url_for('landing', user='admin') }}" class="back-btn"
    >ğŸ”™ Analyze Another Tweet</a
  >
</div>
{% endblock %}
